// FTP Server

package main

import (
	"errors"
	"fmt"
	"net"
	"os"
)

func handleError(err error) {
	fmt.Printf("Error %s", err)
	os.Exit(1)
}

func main() {
	if len(os.Args) != 2 {
		handleError(errors.New("Invalid argument count"))
	}
	port := ":" + os.Args[1]
	address, err := net.ResolveTCPAddr("tcp4", port)
	if err != nil {
		handleError(err)
	}
	listener, err := net.ListenTCP("tcp", address)

	fmt.Printf("FTP server listening at port %s", port)
	for {
		_, err := listener.Accept()
		if err != nil {
			continue
		}
		fmt.Printf("Expect an infinite loop")
	}

	// assume for now host is: 127.0.0.1

}
